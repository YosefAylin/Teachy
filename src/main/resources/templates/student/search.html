<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8"/>
    <title>Find Teachers by Course</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/modern-style.css}"/>
</head>
<body>

<!-- Include Navigation -->
<div th:replace="~{fragments/navigation :: top-nav}"></div>

<div class="education-bg"></div>
<div class="container">
    <div class="form-container">
        <!-- Modern Header -->
        <div style="text-align: center; margin-bottom: 40px;">
            <div style="font-size: 4rem; margin-bottom: 16px; background: linear-gradient(135deg, #6366f1, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">🔎</div>
            <h1 class="form-title" style="background: linear-gradient(135deg, #6366f1, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px;">Find Your Perfect Teacher</h1>
            <p style="color: #a1a1aa; font-size: 18px; font-weight: 300;">Discover expert educators ready to guide your learning journey</p>
        </div>

        <!-- Modern Search Form -->
        <form th:action="@{/student/search}" method="get" style="background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); padding: 30px; border-radius: 20px; border: 2px solid rgba(99, 102, 241, 0.2); margin-bottom: 40px; box-shadow: 0 8px 32px rgba(99, 102, 241, 0.1);">
            <div class="form-group" style="margin-bottom: 24px;">
                <label for="courseId" style="display: block; margin-bottom: 12px; font-weight: 600; color: #e5e7eb; font-size: 16px;">📚 Select Course</label>
                <select id="courseId" name="courseId" required class="form-control" style="background: rgba(255,255,255,0.1); border: 2px solid rgba(99, 102, 241, 0.3); border-radius: 12px; padding: 16px; font-size: 16px; color: white; width: 100%;">
                    <option value="" th:unless="${selectedCourseId != null}" selected disabled style="color: #666;">Choose your subject of interest...</option>
                    <option th:each="c : ${courses}"
                            th:value="${c.id}"
                            th:selected="${selectedCourseId} == ${c.id}"
                            th:text="${c.title}"
                            style="background: #1f2937; color: white;">
                        Course
                    </option>
                </select>
            </div>
            <button type="submit" style="background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; border: none; padding: 16px 32px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; width: 100%; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(99, 102, 241, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(99, 102, 241, 0.3)'">
                🔍 Find Amazing Teachers
            </button>
        </form>

        <div th:if="${selectedCourseId != null}">
            <!-- Modern Results Header -->
            <div style="text-align: center; margin-bottom: 32px; padding: 24px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05)); border-radius: 16px; border-left: 4px solid #10b981;">
                <h2 style="color: #10b981; margin-bottom: 8px; font-size: 24px; font-weight: 700;">🎓 Available Teachers</h2>
                <span style="background: linear-gradient(135deg, #10b981, #34d399); color: white; padding: 8px 16px; border-radius: 20px; font-weight: 600; display: inline-block;" th:if="${teachers != null}" th:text="${#lists.size(teachers)} + ' expert teacher(s) ready to help'">X teachers found</span>
            </div>

            <!-- Modern Teacher Cards Grid -->
            <div th:if="${teachers != null and !#lists.isEmpty(teachers)}" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 24px; margin-bottom: 40px;">
                <div th:each="t : ${teachers}" style="background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); border: 2px solid rgba(99, 102, 241, 0.2); border-radius: 20px; padding: 24px; text-align: center; transition: all 0.3s ease; position: relative; overflow: hidden;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 12px 40px rgba(99, 102, 241, 0.2)'; this.style.borderColor='rgba(99, 102, 241, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'; this.style.borderColor='rgba(99, 102, 241, 0.2)'">

                    <!-- Decorative Background -->
                    <div style="position: absolute; top: -50%; right: -50%; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), transparent); border-radius: 50%; z-index: 0;"></div>

                    <!-- Content -->
                    <div style="position: relative; z-index: 1;">
                        <!-- Teacher Avatar -->
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #6366f1, #8b5cf6); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; font-size: 32px; font-weight: bold; color: white; box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);" th:text="${#strings.substring(t.username, 0, 1).toUpperCase()}">T</div>

                        <!-- Teacher Name -->
                        <h3 style="color: white; margin-bottom: 12px; font-size: 20px; font-weight: 600;" th:text="${t.username}">Teacher</h3>

                        <!-- Teacher Email -->
                        <div th:if="${t.email}" style="color: #a1a1aa; margin-bottom: 20px; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <span style="font-size: 16px;">📧</span>
                            <span th:text="${t.email}">email</span>
                        </div>

                        <!-- Modern Action Buttons -->
                        <div style="display: flex; gap: 12px; flex-direction: column;">
                            <a th:href="@{/student/teacher/profile/{id}(id=${t.id})}"
                               style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));
                                      color: #a78bfa;
                                      border: 2px solid rgba(99, 102, 241, 0.3);
                                      padding: 12px 20px;
                                      border-radius: 12px;
                                      text-decoration: none;
                                      font-weight: 600;
                                      transition: all 0.3s ease;
                                      display: flex;
                                      align-items: center;
                                      justify-content: center;
                                      gap: 8px;
                                      font-size: 14px;"
                               onmouseover="this.style.background='linear-gradient(135deg, #6366f1, #8b5cf6)'; this.style.color='white'; this.style.transform='scale(1.05)'"
                               onmouseout="this.style.background='linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2))'; this.style.color='#a78bfa'; this.style.transform='scale(1)'">
                                <span style="font-size: 16px;">👁️</span>
                                View Full Profile
                            </a>

                            <a th:href="@{|/student/lessons/request?teacherId=${t.id}&courseId=${selectedCourseId}|}"
                               style="background: linear-gradient(135deg, #10b981, #34d399);
                                      color: white;
                                      border: 2px solid #10b981;
                                      padding: 12px 20px;
                                      border-radius: 12px;
                                      text-decoration: none;
                                      font-weight: 700;
                                      transition: all 0.3s ease;
                                      display: flex;
                                      align-items: center;
                                      justify-content: center;
                                      gap: 8px;
                                      font-size: 14px;
                                      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);"
                               onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 6px 20px rgba(16, 185, 129, 0.4)'"
                               onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 15px rgba(16, 185, 129, 0.3)'">
                                <span style="font-size: 16px;">📚</span>
                                Request Lesson Now
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div th:if="${teachers == null or #lists.isEmpty(teachers)}" style="text-align: center; padding: 60px 20px; background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)); border-radius: 20px; border: 2px dashed rgba(99, 102, 241, 0.3);">
                <div style="font-size: 4rem; margin-bottom: 20px; opacity: 0.6;">🔍</div>
                <h3 style="color: #d1d5db; margin-bottom: 12px; font-size: 20px;">No Teachers Found</h3>
                <p style="color: #9ca3af; font-size: 16px; margin-bottom: 8px;">No educators are currently available for this course.</p>
                <p style="color: #6b7280; font-size: 14px;">Try selecting a different course or check back later for new teachers.</p>
            </div>
        </div>

        <!-- Modern Back Button -->
        <div style="text-align: center; margin-top: 40px;">
            <a th:href="@{/student/home}"
               style="background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
                      color: #d1d5db;
                      border: 2px solid rgba(255,255,255,0.2);
                      padding: 12px 24px;
                      border-radius: 12px;
                      text-decoration: none;
                      font-weight: 600;
                      transition: all 0.3s ease;
                      display: inline-flex;
                      align-items: center;
                      gap: 8px;"
               onmouseover="this.style.background='rgba(255,255,255,0.1)'; this.style.color='white'; this.style.transform='translateY(-2px)'"
               onmouseout="this.style.background='linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05))'; this.style.color='#d1d5db'; this.style.transform='translateY(0)'">
                <span>🏠</span>
                Back to Dashboard
            </a>
        </div>
    </div>
</div>

<!-- Include Navigation Script -->
<script th:replace="~{fragments/navigation :: nav-script}"></script>

</body>
</html>
