<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Manage Users - Admin</title>
    <link rel="stylesheet" th:href="@{/css/modern-style.css}" />
</head>
<body>
<div class="education-bg"></div>
<div class="container">
    <div class="form-container">
        <h1 class="form-title">ðŸ‘¥ User Management</h1>

        <div class="card">
            <table style="width: 100%; border-collapse: collapse; color: white;">
                <thead>
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <th style="padding: 12px; text-align: left;">Username</th>
                    <th style="padding: 12px; text-align: left;">Email</th>
                    <th style="padding: 12px; text-align: left;">Role</th>
                    <th style="padding: 12px; text-align: left;">Status</th>
                    <th style="padding: 12px; text-align: left;">Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="user : ${users.content}" style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <td style="padding: 12px;" th:text="${user.username}">Username</td>
                    <td style="padding: 12px;" th:text="${user.email}">Email</td>
                    <td style="padding: 12px;">
                        <span th:if="${user instanceof T(io.jos.onlinelearningplatform.model.Admin)}" class="badge">ADMIN</span>
                        <span th:if="${user instanceof T(io.jos.onlinelearningplatform.model.Teacher)}" class="badge">TEACHER</span>
                        <span th:if="${user instanceof T(io.jos.onlinelearningplatform.model.Student)}" class="badge">STUDENT</span>
                    </td>
                    <td style="padding: 12px;">
                            <span th:class="'badge ' + (${user.active} ? 'accepted' : 'rejected')"
                                  th:text="${user.active} ? 'Active' : 'Inactive'">Status</span>
                    </td>
                    <td style="padding: 12px;">
                        <form th:action="@{/admin/users/{id}/toggle-active(id=${user.id})}" method="post" style="display: inline;">
                            <button type="submit"
                                    th:class="'btn btn-sm ' + (${user.active} ? 'btn-accent' : 'btn-success')"
                                    th:text="${user.active} ? 'Deactivate' : 'Activate'">Toggle</button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>

            <!-- Pagination -->
            <div style="margin-top: 20px; text-align: center;" th:if="${totalPages > 1}">
                <a th:if="${currentPage > 0}"
                   th:href="@{/admin/users(page=${currentPage - 1})}"
                   class="btn btn-secondary btn-sm">â€¹ Previous</a>

                <span style="margin: 0 15px; color: white;">
                    Page <span th:text="${currentPage + 1}">1</span> of <span th:text="${totalPages}">1</span>
                </span>

                <a th:if="${currentPage < totalPages - 1}"
                   th:href="@{/admin/users(page=${currentPage + 1})}"
                   class="btn btn-secondary btn-sm">Next â€º</a>
            </div>
        </div>

        <div class="button-group mt-24">
            <a th:href="@{/admin/home}" class="btn btn-secondary">Back to Dashboard</a>
        </div>
    </div>
</div>
</body>
</html>